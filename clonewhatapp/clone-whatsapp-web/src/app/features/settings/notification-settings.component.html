<div class="settings-overlay" (click)="onClose()">
  <div class="settings-panel" (click)="$event.stopPropagation()">
    <header class="settings-header">
      <button class="back-btn" (click)="onClose()">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <path fill="currentColor" d="M12 4l1.4 1.4L7.8 11H20v2H7.8l5.6 5.6L12 20l-8-8 8-8z"/>
        </svg>
      </button>
      <h2>Notificaciones</h2>
    </header>

    <div class="settings-content">
      <!-- Sound enabled toggle -->
      <div class="setting-item">
        <div class="setting-info">
          <span class="setting-label">Sonido de notificación</span>
          <span class="setting-description">Reproducir sonido al recibir mensajes</span>
        </div>
        <label class="toggle">
          <input type="checkbox" [(ngModel)]="soundEnabled">
          <span class="slider"></span>
        </label>
      </div>

      @if (soundEnabled) {
        <!-- Sound type selector -->
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Tipo de sonido</span>
          </div>
          <select [(ngModel)]="soundType" class="sound-select">
            @for (option of soundOptions; track option.id) {
              <option [value]="option.type">{{ option.name }}</option>
            }
          </select>
        </div>

        <!-- Volume slider -->
        <div class="setting-item column">
          <div class="setting-info">
            <span class="setting-label">Volumen</span>
            <span class="volume-value">{{ volume }}%</span>
          </div>
          <input
            type="range"
            min="0"
            max="100"
            [(ngModel)]="volume"
            class="volume-slider"
          >
        </div>

        <!-- Play when focused toggle -->
        <div class="setting-item">
          <div class="setting-info">
            <span class="setting-label">Sonar con app activa</span>
            <span class="setting-description">Reproducir sonido incluso cuando estás viendo el chat</span>
          </div>
          <label class="toggle">
            <input type="checkbox" [(ngModel)]="playWhenFocused">
            <span class="slider"></span>
          </label>
        </div>

        <!-- Test button -->
        <div class="setting-item">
          <button class="test-btn" (click)="testSound()" [disabled]="soundType === 'none'">
            <svg viewBox="0 0 24 24" width="20" height="20">
              <path fill="currentColor" d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
            </svg>
            Probar sonido
          </button>
        </div>
      }
    </div>
  </div>
</div>
